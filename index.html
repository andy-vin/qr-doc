<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
    <title>QR-Doc</title>
    <!--Include bootstrap3 css-->
    <!--<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" rel="stylesheet">-->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" media="all">
    <!--Include Font Awesome css-->
    <!--<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">-->
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" media="all">
    <!--Include X-editable css-->
    <!--<link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"/>-->
    <link href="css/bootstrap-editable.css" rel="stylesheet" type="text/css" media="all">
    <!--Include style css-->
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!--<script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>-->
    <script src="js/jquery-2.0.3.min.js" rel="script" type="text/javascript"></script>
    <!--<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>-->
    <script src="js/bootstrap.min.js" rel="script" type="text/javascript"></script>
    <!--Include X-editable js-->
    <!--<script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>-->
    <script src="js/bootstrap-editable.min.js" rel="script" type="text/javascript"></script>
    <!--Dropzone-->
    <script src="js/dropzone.js" rel="script" type="text/javascript"></script>
    <!--Qr-Code-->
    <script src="js/qrcode.js" rel="script" type="text/javascript"></script>
</head>
<body>
    <page size="A4">
        <div id="dropzone">
            <div>
                <i class="fa fa-download" aria-hidden="true"></i> завантажте реквізити документу
            </div>
            <input type="file" accept="image/png, application/pdf" />
        </div>
        <div class="details">
            <div class="row">
                <div class="type">
                    <a href="#" id="type" class="edit" data-type="text" data-inputclass="type-input" data-value="Внутрішній / вхідний / вихідний">оберіть необхідний тип документу</a>
                    <p>№</p>
                    <a href="#" id="number" class="edit" data-type="text" data-inputclass="number-input" >вкажить номер</a>
                    <a href="#" id="data" class="edit" data-type="text" data-inputclass="data-input" >вкажить дату</a>
                </div>
            </div>
        </div>
        <div class="sender">
            <div class="row">
                <p class="sender-title">Відправник</p>
                <div class="sender-name">
                    <a href="#" id="sender" class="edit sender-name" data-type="text" data-inputclass="sender-input" data-value="текст">вкажіть відправника</a>
                </div>
            </div>
        </div>
        <div class="receiver">
            <div class="row">
                <p class="receiver-title">Адресат</p>
                <div class="receiver-name">
                    <a href="#" id="receiver" class="edit sender-name" data-type="text" data-inputclass="receiver-input" data-value="текст">вкажіть адресата</a>
                </div>
            </div>
        </div>
        <div class="title">
            <a href="#" id="doc-title" class="edit" data-type="text" data-inputclass="doc-title-input" data-value="текст">Вкажіть вид документу</a>
        </div>
        <div class="qr-block">
            <div class="row">
                <div class="select-path">
                    <input id="text" type="file" data-classButton="btn btn-primary">
                </div>
                <div id="qrcode" class="qr-code"></div>
            </div>
        </div>
    </page>
    <!--Use portrait-->
    <!--<page size="A4" layout="portrait"></page>-->

    <script>
        $( document ).ready(function() {
//            Dropzone. Begin
            $(window).on('dragenter', function(){
                $(this).preventDefault();
            });

            $('#dropzone').bind('dragover', function() {
                $(this).addClass('hover');
            });

            $('#dropzone').bind('dragleave', function() {
                $(this).removeClass('hover');
            });

            $('#dropzone input').on('change', function(e) {
                var file = this.files[0];

                $('#dropzone').removeClass('hover');

                if (this.accept && $.inArray(file.type, this.accept.split(/, ?/)) == -1) {
                    return alert('File type not allowed.');
                }

                $('#dropzone').addClass('dropped');
                $('#dropzone img').remove();

                if ((/^image\/(gif|png|jpeg)$/i).test(file.type)) {
                    var reader = new FileReader(file);

                    reader.readAsDataURL(file);

                    reader.onload = function(e) {
                        var data = e.target.result,
                                $img = $('<img />').attr('src', data).fadeIn();

                        $('#dropzone div').html($img);
                    };
                } else {
                    var ext = file.name.split('.').pop();

                    $('#dropzone div').html(ext);
                }
            });
//            Dropzone. End
//            X-Editable. Begin
            // setting defaults for the editable
            $.fn.editable.defaults.mode = 'inline';
//            $.fn.editable.defaults.showbuttons = false;

            $('.edit').editable();
//            X-Editable. End
//            QR-Code.Begin
            var qrcode = new QRCode("qrcode", {
                width: 128,
                height: 128,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });

            $("#text").on('change', function () {
                var filePath = $(this).val();
                console.log(filePath);
                qrcode.makeCode(filePath);
            });
//            QR-Code.End

        });
    </script>
</body>
</html>